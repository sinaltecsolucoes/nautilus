# public/.htaccess
# Local: C:\xampp\htdocs\nautilus\public\

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /nautilus/public/

    # ==============================================================
    # 1. ROTAS DA API: CAPTURA /api/... ANTES DE QUALQUER COISA
    # ==============================================================
    RewriteRule ^api/(.*)$ api.php?route=$1 [L,QSA]
    RewriteRule ^api$ api.php?route=auth/login [L,QSA]

    # ==============================================================
    # 2. IGNORA ARQUIVOS E PASTAS REAIS (CSS, JS, IMAGENS, etc)
    # ==============================================================
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # ==============================================================
    # 3. TUDO O MAIS → index.php (rotas da aplicação web)
    # ==============================================================
    RewriteRule ^(.*)$ index.php?route=$1 [L,QSA]
</IfModule>